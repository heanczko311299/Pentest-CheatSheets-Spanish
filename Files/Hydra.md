#Pentest  

Hydra es una herramienta muy versátil en Kali Linux, utilizada para realizar ataques de fuerza bruta en diferentes servicios de red. A continuación, te proporciono un manual completo que incluye la instalación, el uso básico y avanzado, y una explicación detallada de las opciones más utilizadas.

### 1. **Instalación de Hydra**

En Kali Linux, Hydra viene preinstalado. Si por alguna razón no está instalado, puedes hacerlo con el siguiente comando:

```bash
sudo apt-get install hydra
```

También puedes instalar la versión gráfica de Hydra (xHydra):

```bash
sudo apt-get install hydra-gtk
```

### 2. **Uso Básico**

Hydra realiza ataques de fuerza bruta probando múltiples combinaciones de credenciales contra un servicio específico. La estructura básica de un comando Hydra es:

```bash
hydra [opciones] servicio://objetivo
```

#### Ejemplo simple:
```bash
hydra -l usuario -p contraseña ssh://192.168.1.10
```

Este comando intentará iniciar sesión en el servicio SSH en `192.168.1.10` con el nombre de usuario `usuario` y la contraseña `contraseña`.

### 3. **Opciones Principales**

- `-l <usuario>`: Especifica un único nombre de usuario.
- `-L <archivo>`: Especifica un archivo que contiene una lista de nombres de usuario.
- `-p <contraseña>`: Especifica una única contraseña.
- `-P <archivo>`: Especifica un archivo que contiene una lista de contraseñas.
- `-t <n>`: Define el número de hilos o conexiones simultáneas (predeterminado es 16). Usar más hilos puede acelerar el ataque, pero también podría provocar que el servicio se bloquee o limite el acceso.
- `-s <puerto>`: Especifica un puerto diferente al predeterminado para el servicio.
- `-v` o `-V`: Modo detallado. Muestra cada intento de inicio de sesión.
- `-f`: Detiene el ataque después del primer intento exitoso.
- `-e nsr`: Realiza ataques nulos (`n`), espacios en blanco (`s`), y ataques de reverso (`r`) para probar combinaciones adicionales.

### 4. **Servicios Compatibles**

Hydra es compatible con una amplia variedad de servicios y protocolos, incluidos:

- **SSH** (Secure Shell)
- **FTP** (File Transfer Protocol)
- **HTTP/HTTPS** (Autenticación básica, formularios y autenticación HTTP Digest)
- **Telnet**
- **RDP** (Remote Desktop Protocol)
- **SMB** (Server Message Block)
- **VNC** (Virtual Network Computing)
- **POP3**, **IMAP**, **SMTP** (Protocolo de correo electrónico)
- **MySQL**, **PostgreSQL** (Bases de datos)
- **SNMP** (Simple Network Management Protocol)
- **LDAP** (Lightweight Directory Access Protocol)
- **Redis**, **MongoDB** (Bases de datos NoSQL)

### 5. **Ejemplos Avanzados**

#### 5.1. **Ataque de Fuerza Bruta SSH con Archivos de Usuarios y Contraseñas**
```bash
hydra -L users.txt -P passwords.txt ssh://192.168.1.10 -t 4
```
En este caso, Hydra utilizará `users.txt` y `passwords.txt` para probar combinaciones de usuarios y contraseñas en el servicio SSH de `192.168.1.10`, usando 4 hilos.

#### 5.2. **Ataque HTTP con Formulario Web**
Para ataques en formularios web, necesitas identificar el parámetro de usuario y contraseña en el formulario y la URL de envío. Aquí hay un ejemplo:

```bash
hydra -l admin -P passwords.txt http-post-form "/login.php:username=^USER^&password=^PASS^:F=incorrect"
```
En este caso, Hydra enviará solicitudes POST a `/login.php`, reemplazando `^USER^` y `^PASS^` con valores de los archivos.

#### 5.3. **Ataque SMB**
```bash
hydra -L users.txt -P passwords.txt smb://192.168.1.10
```
Este comando intentará acceder a un servicio SMB en la dirección IP `192.168.1.10`.

### 6. **Parámetros y Modificadores Útiles**

-o : Guarda los resultados en un archivo especificado.
-r : Reanuda un ataque desde un archivo guardado.
**-u**: Para probar solo un usuario y una contraseña al mismo tiempo (en lugar de todas las combinaciones posibles).
-R: Repite el último ataque usando los mismos parámetros.

### 7. **Versiones Gráficas y Plugins**

Hydra tiene una versión gráfica llamada **xHydra**, que proporciona una interfaz de usuario para realizar ataques. Aunque las funcionalidades son similares a las de la versión de línea de comandos, puede ser más fácil para algunos usuarios trabajar con una GUI.

Instala xHydra con el siguiente comando:

```bash
sudo apt-get install hydra-gtk
```

Luego puedes ejecutarlo con:

```bash
xhydra
```

### 8. **Mejores Prácticas**

- **Monitorea el tráfico**: Usa Wireshark o tcpdump para observar las solicitudes que estás enviando y asegurarte de que todo funcione como esperas.
- **Limita los intentos**: Para evitar bloquear una cuenta, limita la cantidad de intentos y utiliza la opción `-f` para detenerse en el primer éxito.
- **Comprueba los resultados**: Verifica que los resultados sean correctos y que las credenciales obtenidas sean funcionales.

### 9. **Advertencia**

**Hydra debe utilizarse únicamente con fines legítimos y éticos.** El uso de esta herramienta para atacar sistemas sin autorización es ilegal y puede tener consecuencias graves, tanto legales como de otro tipo. Asegúrate de tener el permiso explícito para realizar pruebas de penetración en los sistemas objetivo.

### 10. **Documentación Adicional**

Puedes acceder a la página de manual de Hydra con el siguiente comando:

```bash
man hydra
```

O puedes revisar la documentación oficial en el [repositorio de GitHub de THC-Hydra](https://github.com/vanhauser-thc/thc-hydra).

---

Si tienes alguna pregunta específica o necesitas ejemplos adicionales, no dudes en pedírmelo.